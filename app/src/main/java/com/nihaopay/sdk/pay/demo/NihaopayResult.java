package com.nihaopay.sdk.pay.demo;import org.json.JSONException;import org.json.JSONObject;import android.content.Intent;import android.text.TextUtils;public class NihaopayResult {			private String resultStatus;	private String status;	private String result;	private String memo;	/**	 * 支付宝返回结果	 * @param rawResult	 */	public NihaopayResult(String rawResult) {		if (TextUtils.isEmpty(rawResult))			return;		String[] resultParams = rawResult.split(";");		for (String resultParam : resultParams) {			if (resultParam.startsWith("resultStatus")) {				resultStatus = gatValue(resultParam, "resultStatus");			}			if (resultParam.startsWith("result")) {				setResult(gatValue(resultParam, "result"));			}			if (resultParam.startsWith("memo")) {				memo = gatValue(resultParam, "memo");			}		}				if(TextUtils.equals(resultStatus, "9000")){			status = "success";		}else if(TextUtils.equals(resultStatus, "8000")){			status = "pending";		}else{			status = "failure";		}	}	/**	 * 银联返回结果	 * @param requestCode	 * @param resultCode	 * @param data	 */	public NihaopayResult(int requestCode, int resultCode, Intent data) {		 if (data == null) {	            return;	        }		 String msg = "";	        /*	         * 支付控件返回字符串:success、fail、cancel 分别代表支付成功，支付失败，支付取消	         */	        String str = data.getExtras().getString("pay_result");	        if (str.equalsIgnoreCase("success")) {	            // 支付成功后，extra中如果存在result_data，取出校验	            // result_data结构见c）result_data参数说明	            if (data.hasExtra("result_data")) {	                String result = data.getExtras().getString("result_data");	                try {	                    JSONObject resultJson = new JSONObject(result);	                    String sign = resultJson.getString("sign");	                    String dataOrg = resultJson.getString("data");	                    // 验签证书同后台验签证书	                    // 此处的verify，商户需送去商户后台做验签//	                    boolean ret = verify(dataOrg, sign, NihaopayConfig.unionMode);	                    boolean ret =true;	                    if (ret) {	                        // 验证通过后，显示支付结果	                        msg = "success";	                    } else {	                        // 验证不通过后的处理	                        // 建议通过商户后台查询支付结果	                        msg = "failure";	                    }	                } catch (JSONException e) {	                }	            } else {	                // 未收到签名信息	                // 建议通过商户后台查询支付结果	                msg = "success";	            }	        } else if (str.equalsIgnoreCase("fail")) {	            msg = "failure";	        } else if (str.equalsIgnoreCase("cancel")) {	            msg = "failure";	        }	        	        status = msg;	        	}//	@Override//	public String toString() {//		return "resultStatus={" + resultStatus + "};memo={" + memo//				+ "};result={" + result + "}";//	}	private String gatValue(String content, String key) {		String prefix = key + "={";		return content.substring(content.indexOf(prefix) + prefix.length(),				content.lastIndexOf("}"));	}	/**	 * @return the resultStatus	 */	public String getResultStatus() {				return resultStatus;	}	/**	 * @return the memo	 */	public String getMemo() {		return memo;	}//	/**//	 * @return the result//	 *///	public String getResult() {//		return result;//	}	public String getStatus() {		return status;	}	public void setStatus(String status) {		this.status = status;	}	public String getResult() {		return result;	}	public void setResult(String result) {		this.result = result;	}}